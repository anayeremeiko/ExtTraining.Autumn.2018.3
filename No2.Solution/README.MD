Переделали систему типов с использованием событий
